# MMFirstFilterPy

Набор скриптов для упрощения жизни приёмной комиссии (в основном матмеха).

## Скрипты и их входы

Все скрипты требуют на вход выгрузку "Все заявления" из ССПВО.

`to_process.py` --- скрипт, который объединяет выгрузки из 1С и ССПВО, а затем оставляет только абитуриентов с первым приоритетом на указанные направления (по-умолчанию, матмеха).
На вход требует выгрузку из 1С со списком кандидатов на обработку (фильтр по факультету + статусу "Получен" или "Есть необработанные").

`find_missing_math.py` --- скрипт, который ищет абитуриентов, потерявшихся между ССПВО и 1С, специфичен для матмеха.
На вход требует выгрузку всех клиентов матмеха (фильтр по факультету в 1С).

`find_missing_all.py` --- скрипт, который ищет абитуриентов, потерявшихся между ССПВО и 1С, во всём СПбГУ.
На вход выгрузка БЕЗ фильтров, иначе будут некорректные результаты.

## Как запустить

В качестве менеджера пакетов --- [pdm](https://pdm-project.org/en/latest/), чисто ради веселья.
Также есть `requirements.txt` для тех, кто предпочитает стандартный pip.
Пока что инструкция только для Linux.

Для пользователей pdm:
1. Установить pdm по официальной инструкции (советую способ через pipx).
2. Склонировать репозиторий в нужную директорию и перейти в него
```console
$ git clone https://github.com/WoWaster/MMFirstFilterPy
$ cd MMFirstFilterPy
```
3. Установить зависимости
```console
$ pdm install
```
4. Запустить нужный скрипт.
На примере `to_process.py`
```console
$ pdm run src/mmfirstfilterpy/to_process.py 1С.xlsx Все_заявления.xlsx На-проверку.xlsx
```

Для пользователей pip:
1. Установите pip и venv из репозиториев своего дистрибутива.
Для Ubuntu `python3-pip` и `python3-venv`.
Для Arch Linux только `python-pip`.
Для OpenSUSE `python3-pip`.
2. Склонировать репозиторий в нужную директорию и перейти в него
```console
$ git clone https://github.com/WoWaster/MMFirstFilterPy
$ cd MMFirstFilterPy
```
3. Создать venv и установить зависимости:
```console
$ python -m venv ./venv
$ source venv/bin/activate
$ pip install -r requirements.txt
```
4. Запустить нужный скрипт.
На примере `to_process.py`
```console
$ python src/mmfirstfilterpy/to_process.py 1С.xlsx Все_заявления.xlsx На-проверку.xlsx
```

## Как переиспользовать

Коллеги с других факультетов, вы можете переиспользовать данные скрипты для своих нужд!

Фильтрация производится по идентификаторам конкурсных групп с ССПВО.
Пример таковых для матмеха есть в файле `src/mmfirstfilterpy/constants.py` в переменной `MATH_LISTS`.
